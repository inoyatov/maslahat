{% extends "base.html" %}
{% load staticfiles %}
{% load cache %}

{% block content %}
<div class="container" style="display:flex;justify-content:center;align-items:center;">
  <div>
    <img src="//d13yacurqjgara.cloudfront.net/users/607375/screenshots/2740815/maslahatuz_1x.jpg"/>
  <h3>Сайт фаол тарзда янгиланиб бориляпти. Тез кунларда янги кўринишда ишга тушади.</h3>
  <p>Сайтда яна қандай функциялар бўлишини истар эдингиз? <strong>Бу ҳақда дастурчига <a href="https://telegram.me/crispybone" target="_blank">хабар беринг</a>.</strong></p>
  {% for post in new_posts %}
  <div id="{{ post.author_id }}"></div>
  {% endfor %}
  </div>
</div>
{% endblock %}
{% block javascript %}

<script src="//cdn.jsdelivr.net/theaterjs/latest/theater.min.js"></script>
<script>
  var theater = theaterJS()

  theater
    .on('type:start, erase:start', function () {
      // add a class to actor's dom element when he starts typing/erasing
      var actor = theater.getCurrentActor()
      actor.$element.classList.add('is-typing')
    })
    .on('type:end, erase:end', function () {
      // and then remove it when he's done
      var actor = theater.getCurrentActor()
      actor.$element.classList.remove('is-typing')
    })

  theater
    .addActor('{{ last_post.author }}')

  theater
    .addScene('{{ last_post.author}}:{{ last_post.text|linebreaksbr }}', 400)
    .addScene(theater.replay)
</script>
{% endblock %}
